.container { padding: 24px; }

.exportBar {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 24px;
  padding: 14px 16px;
  background: rgba(20,17,12,0.6);
  border: 1px solid var(--border-ornate);
  border-radius: 2px;
}

.exportBtn {
  padding: 8px 16px;
  font-family: 'Cinzel', serif;
  font-size: 13px;
  letter-spacing: 2px;
  text-transform: uppercase;
  background: transparent;
  border: 1px solid var(--gold-dim);
  color: var(--gold-dim);
  border-radius: 2px;
  cursor: pointer;
  transition: all 0.2s;
}
.exportBtn:hover {
  border-color: var(--gold-bright);
  color: var(--gold-bright);
  box-shadow: 0 0 8px rgba(201,168,76,0.15);
}

.exportBtnRoster {
  border-color: rgba(107,85,48,0.8);
  color: var(--text-secondary);
}
.exportBtnRoster:hover {
  border-color: var(--gold-bright);
  color: var(--gold-bright);
  background: rgba(138,111,53,0.15);
  box-shadow: 0 0 12px rgba(201,168,76,0.2);
}

.exportBtnSaved {
  border-color: #4a7a4a;
  color: #7aaa7a;
  cursor: default;
}
.exportBtnSaved:hover {
  border-color: #4a7a4a;
  color: #7aaa7a;
  box-shadow: none;
}

.exportBtnSecondary {
  padding: 8px 16px;
  font-family: 'Cinzel', serif;
  font-size: 13px;
  letter-spacing: 1px;
  text-transform: uppercase;
  background: transparent;
  border: 1px solid rgba(107,85,48,0.4);
  color: var(--text-secondary);
  border-radius: 2px;
  cursor: pointer;
  transition: all 0.2s;
}
.exportBtnSecondary:hover {
  border-color: var(--gold-dim);
  color: var(--gold-dim);
}

/* ===== CHARACTER SHEET ===== */
.sheet {
  max-width: 880px;
  margin: 0 auto;
  background: linear-gradient(160deg, rgba(28,24,18,0.99), rgba(20,17,12,0.99));
  border: 1px solid var(--border-ornate);
  border-radius: 3px;
  padding: 32px;
  position: relative;
  overflow: hidden;
}

.sheet::before {
  content: '';
  position: absolute;
  inset: 6px;
  border: 1px solid rgba(107,85,48,0.2);
  pointer-events: none;
  z-index: 0;
}

/* Header */
.header {
  text-align: center;
  padding-bottom: 20px;
  border-bottom: 1px solid rgba(107,85,48,0.4);
  margin-bottom: 16px;
  position: relative;
  z-index: 1;
}

.gameTitle {
  font-family: 'Cinzel Decorative', serif;
  font-size: 13px;
  letter-spacing: 1.5px;
  color: var(--gold-dim);
  text-transform: uppercase;
  margin-bottom: 10px;
}

.charName {
  font-family: 'Cinzel Decorative', serif;
  font-size: 34px;
  color: var(--gold-bright);
  text-shadow: 0 0 30px rgba(201,168,76,0.4), 0 2px 4px rgba(0,0,0,0.8);
  line-height: 1;
  margin-bottom: 6px;
  letter-spacing: 2px;
}

.charSubtitle {
  font-family: 'Cinzel', serif;
  font-size: 12px;
  color: var(--text-secondary);
  letter-spacing: 1px;
  font-style: italic;
}

.runeDivider {
  text-align: center;
  margin: 12px 0;
  color: var(--gold-dim);
  letter-spacing: 8px;
  opacity: 0.7;
  font-size: 14px;
  position: relative;
  z-index: 1;
}

/* Identity */
.identityRow {
  display: flex;
  flex-wrap: wrap;
  gap: 0;
  border: 1px solid var(--border-ornate);
  border-radius: 2px;
  overflow: hidden;
  margin-bottom: 12px;
  position: relative;
  z-index: 1;
}

.idField {
  flex: 1;
  min-width: 100px;
  padding: 8px 12px;
  border-right: 1px solid rgba(107,85,48,0.3);
  background: rgba(20,17,12,0.5);
}
.idField:last-child { border-right: none; }

.idLabel {
  display: block;
  font-family: 'Cinzel', serif;
  font-size: 12px;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--label-text);
  margin-bottom: 3px;
}

.idVal {
  font-family: 'Cinzel', serif;
  font-size: 13px;
  color: var(--text-secondary);
}

/* Attribute Trio */
.attrTrio {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  border: 1px solid var(--border-ornate);
  border-radius: 2px;
  overflow: hidden;
  margin-bottom: 12px;
  position: relative;
  z-index: 1;
}

.attrCell {
  padding: 16px 10px;
  text-align: center;
  border-right: 1px solid var(--border-ornate);
}
.attrCell:last-child { border-right: none; }
.body { background: var(--body-tint); }
.heart { background: var(--heart-tint); }
.wits { background: var(--wits-tint); }

.attrName {
  display: block;
  font-family: 'Cinzel', serif;
  font-size: 13px;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--text-secondary);
  margin-bottom: 10px;
}

.attrSplit {
  display: flex;
  border: 1px solid rgba(107,85,48,0.3);
  border-radius: 1px;
  overflow: hidden;
}
.attrHalf { flex: 1; padding: 6px 8px; text-align: center; }
.attrDivider { width: 1px; background: rgba(107,85,48,0.4); }
.halfLabel {
  display: block;
  font-family: 'Cinzel', serif;
  font-size: 12px;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--label-text);
  margin-bottom: 4px;
}
.halfVal {
  font-family: 'Cinzel Decorative', serif;
  font-size: 24px;
  color: var(--gold-bright);
  line-height: 1;
}

/* Derived */
.derivedRow {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 8px;
  margin-bottom: 12px;
  position: relative;
  z-index: 1;
}

.derivedBox {
  background: rgba(20,17,12,0.7);
  border: 1px solid var(--border-ornate);
  border-radius: 2px;
  padding: 8px;
  text-align: center;
}

.derivedLabel {
  display: block;
  font-family: 'Cinzel', serif;
  font-size: 12px;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--label-text);
  margin-bottom: 4px;
}

.derivedVal {
  font-family: 'Cinzel Decorative', serif;
  font-size: 20px;
  color: var(--gold-bright);
  text-shadow: 0 0 10px rgba(201,168,76,0.3);
}

/* Hope & Shadow */
.hopeShadowRow {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-bottom: 12px;
  position: relative;
  z-index: 1;
}

.hopePanel, .shadowPanel {
  border: 1px solid var(--border-ornate);
  border-radius: 2px;
  overflow: hidden;
}

.shadowPanel {
  background: rgba(35,15,15,0.5);
  border-color: rgba(139,32,32,0.4);
}

.panelTitle {
  font-family: 'Cinzel', serif;
  font-size: 12px;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--gold-dim);
  padding: 8px 14px 5px;
  border-bottom: 1px solid rgba(107,85,48,0.3);
  background: rgba(20,17,12,0.4);
}

.splitStat {
  display: flex;
  padding: 10px 14px;
}

.splitHalf { flex: 1; text-align: center; }
.splitLabel {
  display: block;
  font-family: 'Cinzel', serif;
  font-size: 12px;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--label-text);
  margin-bottom: 4px;
}
.splitVal {
  font-family: 'Cinzel Decorative', serif;
  font-size: 22px;
  color: var(--gold-bright);
}

/* Input variant of splitVal — used for Hope Current / Shadow fields */
.splitInput {
  display: block;
  width: 80px;
  margin: 0 auto;
  padding: 2px 4px;
  text-align: center;
  background: transparent;
  border: none;
  border-bottom: 1px solid rgba(107,85,48,0.5);
  border-radius: 0;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
  -moz-appearance: textfield;
}
.splitInput::-webkit-outer-spin-button,
.splitInput::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.splitInput:focus {
  border-bottom-color: var(--gold-dim);
  box-shadow: 0 2px 6px rgba(201,168,76,0.15);
}

/* Play mode — Hope Current field is read-only; driven by In-Play Tracking */
.splitInputDisabled {
  color: rgba(107,85,48,0.5);
  border-bottom-color: rgba(107,85,48,0.2);
  cursor: not-allowed;
  pointer-events: none;
}
.splitInputDisabled:focus {
  border-bottom-color: rgba(107,85,48,0.2);
  box-shadow: none;
}

.threshold {
  font-family: 'Cinzel', serif;
  font-size: 12px;
  color: var(--label-text);
  padding: 4px 14px 8px;
  letter-spacing: 0.5px;
}

/* Skills */
.skillsLayout {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-bottom: 12px;
  position: relative;
  z-index: 1;
}

.skillGroup {
  background: linear-gradient(135deg, rgba(45,40,32,0.95), rgba(35,30,22,0.98));
  border: 1px solid var(--border-ornate);
  border-radius: 2px;
  padding: 12px 14px;
}

.grpBody { border-top: 2px solid rgba(180,130,50,0.5); }
.grpHeart { border-top: 2px solid rgba(140,50,50,0.6); }
.grpWits { border-top: 2px solid rgba(50,80,140,0.5); }
.grpCombat { border-top: 2px solid rgba(130,50,50,0.6); }

.skillGroupTitle {
  font-family: 'Cinzel', serif;
  font-size: 12px;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--gold-dim);
  margin-bottom: 8px;
  padding-bottom: 5px;
  border-bottom: 1px solid rgba(107,85,48,0.3);
}

.skillRow {
  display: flex;
  align-items: center;
  padding: 4px 0;
  border-bottom: 1px solid rgba(107,85,48,0.15);
}
.skillRow:last-child { border-bottom: none; }

.skillName {
  font-family: 'Cinzel', serif;
  font-size: 13px;
  color: var(--text-primary);
  flex: 1;
  letter-spacing: 0.5px;
  display: flex;
  align-items: center;
  gap: 4px;
}

.skillFavoured { color: var(--gold-bright); font-style: italic; }
.star { color: var(--gold-bright); font-size: 13px; }

.pipRow { display: flex; gap: 2px; }
.pip {
  width: 10px; height: 10px;
  border-radius: 50%;
  border: 1px solid var(--gold-dim);
}
.pipFilled {
  background: var(--gold-bright);
  box-shadow: 0 0 3px rgba(201,168,76,0.5);
}
.pipEmpty { background: rgba(20,17,12,0.5); }

.combatStats {
  display: flex;
  gap: 16px;
  padding-top: 8px;
  margin-top: 4px;
  border-top: 1px solid rgba(107,85,48,0.3);
}
.combatStat { text-align: center; flex: 1; }
.combatLabel {
  display: block;
  font-family: 'Cinzel', serif;
  font-size: 12px;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--label-text);
  margin-bottom: 3px;
}
.combatVal {
  font-family: 'Cinzel Decorative', serif;
  font-size: 18px;
  color: var(--gold-bright);
}

/* Traits */
.traitsLayout {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 10px;
  margin-bottom: 12px;
  position: relative;
  z-index: 1;
}

.traitsPanel {
  background: linear-gradient(135deg, rgba(45,40,32,0.95), rgba(35,30,22,0.98));
  border: 1px solid var(--border-ornate);
  border-radius: 2px;
  overflow: hidden;
}

.trait {
  padding: 8px 12px;
  border-bottom: 1px solid rgba(107,85,48,0.2);
}
.trait:last-child { border-bottom: none; }

.traitName {
  display: block;
  font-family: 'Cinzel', serif;
  font-size: 13px;
  color: var(--gold-bright);
  margin-bottom: 4px;
}

.traitDesc {
  font-size: 14px;
  color: var(--label-text);
  line-height: 1.5;
  font-style: italic;
}

.traitEmpty { display: block; padding: 8px 12px; font-size: 12px; color: var(--label-text); font-style: italic; }

/* Equipment */
.eqLayout {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-bottom: 12px;
  position: relative;
  z-index: 1;
}

.eqPanel {
  background: linear-gradient(135deg, rgba(45,40,32,0.95), rgba(35,30,22,0.98));
  border: 1px solid var(--border-ornate);
  border-radius: 2px;
  overflow: hidden;
}

.weaponRow {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 7px 12px;
  border-bottom: 1px solid rgba(107,85,48,0.15);
}
.weaponRow:last-child { border-bottom: none; }
.weaponName { font-family: 'Cinzel', serif; font-size: 12px; color: var(--gold-bright); flex: 1; }
.weaponStat { font-family: 'Cinzel', serif; font-size: 13px; color: var(--label-text); }

.eqStat {
  display: flex;
  justify-content: space-between;
  padding: 6px 12px;
  border-bottom: 1px solid rgba(107,85,48,0.15);
  font-family: 'Cinzel', serif;
  font-size: 13px;
  color: var(--text-secondary);
}
.eqStat:last-child { border-bottom: none; }
.eqStat strong { color: var(--gold-bright); }

.loadValue {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Weary = current Endurance ≤ Load (red, danger) */
.loadWeary {
  font-family: 'Cinzel', serif;
  font-size: 11px;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: #c05050;
  border: 1px solid rgba(192,80,80,0.4);
  border-radius: 2px;
  padding: 1px 5px;
}

/* Warning = one point away from Weary (amber) */
.loadWarning {
  font-family: 'Cinzel', serif;
  font-size: 11px;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: #c09030;
  border: 1px solid rgba(192,144,48,0.4);
  border-radius: 2px;
  padding: 1px 5px;
}

/* Backstory */
.backstoryPanel {
  background: linear-gradient(135deg, rgba(45,40,32,0.95), rgba(35,30,22,0.98));
  border: 1px solid var(--border-ornate);
  border-radius: 2px;
  margin-bottom: 12px;
  overflow: hidden;
  position: relative;
  z-index: 1;
}

.backstory {
  padding: 12px 16px;
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.8;
  font-style: italic;
  white-space: pre-wrap;
}

/* Tracking */
.trackingSection {
  background: linear-gradient(135deg, rgba(45,40,32,0.95), rgba(35,30,22,0.98));
  border: 1px solid var(--border-ornate);
  border-radius: 2px;
  overflow: hidden;
  position: relative;
  z-index: 1;
}

.trackingGrid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0;
  padding: 10px 12px;
}

.trackingField {
  padding: 8px;
  text-align: center;
  border: 1px solid rgba(107,85,48,0.2);
  margin: 2px;
}

.trackingLabel {
  display: block;
  font-family: 'Cinzel', serif;
  font-size: 12px;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--label-text);
  margin-bottom: 8px;
}

.trackingBox {
  display: block;
  height: 24px;
  border-bottom: 1px solid rgba(107,85,48,0.3);
}

.trackingRow {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.trackingInput {
  width: 64px;
  padding: 4px 8px;
  font-family: 'Cinzel', serif;
  font-size: 18px;
  font-weight: bold;
  text-align: center;
  color: var(--gold-bright);
  background: rgba(20,17,12,0.7);
  border: 1px solid rgba(107,85,48,0.5);
  border-radius: 2px;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
  /* hide number spin arrows */
  -moz-appearance: textfield;
}
.trackingInput::-webkit-outer-spin-button,
.trackingInput::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.trackingInput:focus {
  border-color: var(--gold-dim);
  box-shadow: 0 0 8px rgba(201,168,76,0.15);
}

.trackingMax {
  font-family: 'Cinzel', serif;
  font-size: 14px;
  color: var(--text-dim);
  white-space: nowrap;
  min-width: 28px;
}

/* Print styles */
@media print {
  .exportBar { display: none; }
  .container { padding: 0; }

  .sheet {
    border: 1px solid #ccc;
    padding: 16px;
    background: white !important;
    color: black;
    box-shadow: none;
    max-width: 100%;
  }
  .sheet::before { display: none; }

  body { background: white; color: black; }

  /* Override dark panel backgrounds */
  .idField,
  .attrCell, .body, .heart, .wits,
  .derivedBox,
  .hopePanel, .shadowPanel,
  .skillGroup,
  .traitsPanel,
  .eqPanel,
  .backstoryPanel,
  .trackingSection,
  .panelTitle {
    background: transparent !important;
  }

  /* Headings & title */
  .charName { color: #1a1208 !important; text-shadow: none; }
  .charSubtitle, .gameTitle { color: #444 !important; }
  .runeDivider { color: #888 !important; }

  /* Labels */
  .attrName, .halfLabel, .splitLabel, .derivedLabel,
  .skillGroupTitle, .panelTitle, .idLabel,
  .trackingLabel, .combatLabel { color: #555 !important; }

  /* Values — gold → near-black */
  .halfVal, .derivedVal, .splitVal, .combatVal,
  .weaponName, .traitName, .eqStat strong { color: #1a1208 !important; text-shadow: none; }

  /* Body text */
  .idVal, .skillName, .backstory, .traitDesc,
  .weaponStat, .eqStat, .threshold { color: #333 !important; }

  /* Skill pips */
  .pip { border-color: #999 !important; }
  .pipFilled { background: #333 !important; box-shadow: none; }
  .pipEmpty { background: #eee !important; }

  /* Tracking & Hope inputs */
  .trackingInput {
    color: black;
    background: white;
    border: none;
    border-bottom: 1px solid #999;
    border-radius: 0;
    box-shadow: none;
  }
  .trackingMax { color: #666; }
  .splitInput { color: black; border-bottom-color: #999; }

  /* Borders */
  .identityRow, .attrTrio, .attrSplit,
  .skillGroup, .traitsPanel, .eqPanel { border-color: #ccc !important; }
  .skillRow, .trait, .weaponRow, .eqStat { border-bottom-color: #ddd !important; }
}
